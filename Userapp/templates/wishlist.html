{% extends 'base.html' %}

{% block content %}
{% load static %}
<br><br><br><br><br><br><br>
<!-- content -->
<div class="content container bg-light">

    <div class="buyer-profile-cover row bg-image mb-4 p-5" style="background-color: azure;">
        <div class="container d-flex  align-items-center h-100 flex-column flex-md-row text-center row text-md-start">
            <div class="col-md-4">
                <img src="{{user.propic.url}}" height="10%" width="60%" class="rounded-circle" alt="..." />
            </div>
            <div class="my-4 my-md-0 col-md-8">
                <h3 class="mb-1" style="text-transform: capitalize;"><strong>Hi {{user.username}},</strong></h3>
                <h5 class="mb-3">Welcome to Zorro-Estore</h5>
                <a href="{% url 'editprofile' %}" class="btn btn-primary btn-lg btn-icon">
                    <i class="bi bi-pencil small"></i> Edit Account
                </a>
            </div>
        </div>
    </div>

    <div class="row">

        <div class="col-md-4">
            <br><br>
            <div class="card">
                <div class="card-body">
                    <ul class="nav nav-pills flex-column gap-2">
                        <li class="nav-item">
                            <a class="nav-link  " href="{% url 'ProfileDash' %}">Dashboard</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="{% url 'UserOrders' %}">My Orders</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="{% url 'UserAddress' %}">My Addresses</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link  active" href="{% url 'mywish' %}">Wishlist</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link " href="{% url 'password_change' %}">Change Password</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-md-8">

            <h4 class="mb-4 text-center">_</h4>
            <div class="row g-4">
                {% for wishes in wishlist %}
                <div class="col-lg-4 col-md-6 col-sm-12 wishes{{wishes.productadded.id}}">
                    <div class="card card-hover">
                        <a href="#">
                            <img src="{{wishes.productadded.image1.url}}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <a href="#">
                                <h6 class="card-title mb-3">{{wishes.productadded.name}}</h6>
                            </a>
                            <div class="d-flex gap-3 mb-3 align-items-center">

                                <h6 class="mb-0">{{wishes.productadded.newpriceinr}}</h6>
                            </div>

                            <div class="d-flex justify-content-between">
                                <a class="add-cart update-cart" data-product="{{wishes.productadded.id}}"
                                    data-action="add" style="cursor: pointer"><button class="btn btn-dark">+ Add
                                        To Cart</button></a>

                                <a href="{% url 'removewish' wishes.productadded.id %}"><button
                                        class="btn btn-danger rounded-circle">X</button></a>

                            </div>
                        </div>
                    </div>
                </div>
                {% endfor %}
                <!-- <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="card card-hover">
                        <a href="#">
                            <img src="{% static 'assets/images/products/3.jpg' %}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <a href="#">
                                <h5 class="card-title mb-3">Digital clock</h5>
                            </a>
                            <div class="d-flex gap-3 mb-3 align-items-center">
                                <h4 class="mb-0">$1.190.90</h4>
                            </div>
                            <div class="d-flex gap-2 mb-3">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-muted"></i>
                                <span>(10)</span>
                            </div>
                            <div class="d-flex">
                                <a href="#" class="btn btn-primary">Add to Cart</a>
                                <a href="#" class="btn ms-auto text-danger">
                                    <i class="bi bi-heart-fill"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="card card-hover">
                        <a href="#">
                            <img src="{% static 'assets/images/products/5.jpg' %}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <a href="#">
                                <h5 class="card-title mb-3">Glasses</h5>
                            </a>
                            <div class="d-flex gap-3 mb-3 align-items-center">
                                <h4 class="mb-0">$1.599.00</h4>
                            </div>
                            <p>&nbsp;</p>
                            <div class="d-flex">
                                <a href="#" class="btn btn-primary">Add to Cart</a>
                                <a href="#" class="btn ms-auto text-danger">
                                    <i class="bi bi-heart-fill"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4 col-md-6 col-sm-12">
                    <div class="card card-hover">
                        <a href="#">
                            <img src="{% static 'assets/images/products/6.jpg' %}" class="card-img-top" alt="...">
                        </a>
                        <div class="card-body">
                            <a href="#">
                                <h5 class="card-title mb-3">Cake</h5>
                            </a>
                            <div class="d-flex gap-3 mb-3 align-items-center">
                                <h4 class="mb-0">$10.00</h4>
                            </div>
                            <div class="d-flex gap-2 mb-3">
                                <i class="bi bi-star-fill text-warning"></i>
                                <i class="bi bi-star-fill text-muted"></i>
                                <i class="bi bi-star-fill text-muted"></i>
                                <i class="bi bi-star-fill text-muted"></i>
                                <i class="bi bi-star-fill text-muted"></i>
                                <span>(1)</span>
                            </div>
                            <div class="d-flex">
                                <a href="#" class="btn btn-primary">Add to Cart</a>
                                <a href="#" class="btn ms-auto text-danger">
                                    <i class="bi bi-heart-fill"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div> -->
            </div>

        </div>
        <br>
    </div>
    <br>
</div>
<!-- ./ content -->
<br>

<script>
    $('.update-cart').on('click', function (e) {
        var product = $(this).data('product')
        var action = $(this).data('action')
        console.log(product)
        console.log(action)
        $.ajax({
            type: 'POST',
            url: "{% url 'updateitem' %}",
            data: {
                productId: product,
                action: action,
                csrfmiddlewaretoken: "{{ csrf_token }}"
            },
            dataType: 'json',
            success: function (response) {
            }
        });
        Swal.fire(
            'Added to cart!',
            'Your item have added to cart',
            'success'
        )
    });
</script>

{% endblock %}